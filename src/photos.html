---
layout: default
title: Search for Photos on Unsplash
---

<style>
  .output {
    background: #eee;
    display: grid;
    gap: 0.5rem;
    grid-template-columns: repeat(auto-fit, 100px);
    justify-content: center;
    margin-top: 2rem;
    padding: 2rem;
  }

  .output:empty {
    display: none;
  }

  .output img {
    height: 100px;
    object-fit: cover;
    width: 100px;
  }
</style>

<h1>{{ title }}</h1>

<form action="/.netlify/functions/unsplash" method="POST">
  <label for="query">
    Search
    <input type="text" id="query" name="query" />
  </label>
  <button type="submit">Submit</button>
</form>

<div class="output"></div>

<script>
  const form = document.querySelector('form');

  form.addEventListener('submit', async (event) => {
    event.preventDefault();

    const data = new FormData(event.target);
    const query = data.get('query');

    const results = await fetch('/.netlify/functions/unsplash', {
      method: 'POST',
      body: JSON.stringify({ query }),
    }).then((response) => response.json());

    const output = document.querySelector('.output');

    output.innerHTML = '';

    results.forEach((photo) => {
      const img = document.createElement('img');
      img.src = photo.urls.thumb;
      img.alt = photo.alt_description;

      output.appendChild(img);
    });
  });
</script>
