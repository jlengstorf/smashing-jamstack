---
layout: default
title: Please Boop This Dog
---

<style>
  img {
    width: 100%;
  }

  button {
    background: black;
    border: none;
    border-radius: 0.5rem;
    color: white;
    display: block;
    font-size: 1.25rem;
    font-weight: bold;
    margin: 1rem auto;
    padding: 0.5rem 1rem;
  }

  p {
    text-align: center;
  }
</style>

<h1>{{ title }}</h1>

<img
  alt="a close-up of a corgi"
  src="https://images.unsplash.com/photo-1519098901909-b1553a1190af?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1934&q=80"
/>

<button class="boop">Boop!</button>

<p>
  This corgi has been booped
  <span class="count"></span>.
</p>

<script>
  async function sendAndUpdate(action) {
    const count = await fetch(`/.netlify/functions/${action}`, {
      method: 'POST',
    }).then((response) => response.text());

    // update the count on the page
    const label = count === 1 ? 'time' : 'times';
    document.querySelector('.count').innerText = `${count} ${label}`;
  }

  // add a new boop whenever the button is clicked
  const button = document.querySelector('.boop');
  button.addEventListener('click', () => sendAndUpdate('add-boop'));

  // on initial page load, get the current boop count
  sendAndUpdate('get-boops');
</script>
